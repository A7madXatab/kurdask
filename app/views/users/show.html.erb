<div class="w-full flex flex-col justify-center items-center mt-10">

  <header class="w-full md:w-10/12">
    <div class="w-full bg-white rounded-md ">
      <header class="flex flex-col justify-center items-center">
        <svg class="w-20 h-20 rounded-full p-2" style="background: #EEF0F1; margin-top: -30px" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg>
        <h1><%= @user.username %></h1>

        <section class="w-full md:px-5">
          <p><%= @user.about %></p>
        </section>
      </header>

      <% if current_user && current_user.id == @user.id %>
        <footer class="w-full flex text-xs mt-2 pb-3">
          <%= link_to t('action.edit'), user_edit_path(username: @user.username), class: "text-orange-600 mx-2" %>
          <%= link_to t('action.delete'), destroy_user_path(username: @user.username), method: :delete, class: "text-red-600 mx-2" %>
        </footer>
      <% end %>
    </div>
  </header>

  <main class="w-full md:w-10/12 my-4">
    <header class="flex justify-center mb-4">
      <div class="w-1/12 mx-4 flex justify-center <%= request.query_parameters[:tab] == 'questions' ? 'border-b-2 border-primary' : '' %>">
        <%= link_to t('.questions'), user_show_path(username: @user.username, tab: 'questions') %>
      </div>

      <div class="w-1/12 mx-4 flex justify-center <%= request.query_parameters[:tab] == 'answers' ? 'border-b-2 border-primary' : '' %>">
        <%= link_to t('.answers'), user_show_path(username: @user.username, tab: 'answers') %>
      </div>
    </header>


    <main class="bg-white rounded-lg shadow p-3">
      <% if request.query_parameters[:tab] == 'questions' %>

        <% if @user.questions.empty? %>
          <h1><%= t '.user_havent_asked' %></h1>
        <% else %>

          <% @user.questions.each do |q| %>
            <%= render 'questions/question', question: q %>
          <% end %>

        <% end %>
      <% end %>

      <% if request.query_parameters[:tab] == 'answers' %>

        <% if @user.answers.empty? %>
          <h1><%= t '.user_havent_answered' %></h1>
        <% else %>

          <% @user.answers.each do |answer| %>
            <div class="flex flex-col md:flex-row justify-center items-start w-full p-2 border-b">

              <div class="w-full md:w-8/12 flex-col items-end">
                <h1 class="text-md md:text-lg text-left text-primary capitalize">
                  <a href="<%= question_path(answer.question.title) %>"><%= answer.question.formatted_title %></a>
                </h1>
                <div class="flex flex-row-reverse justify-between items-center w-full text-sm">
                  <h6 class="">
                    <b> <%= t 'questions.index.asked_by' %></b>
                    <a
                      class="link-primary"
                      href="<%= user_show_path answer.question.user.username %>">
                      <%= answer.question.user.username %>
                    </a>
                  </h6>
                </div>
              </div>

            </div>
          <% end %>

        <% end %>
      <% end %>


    </main>
  </main>

</div>