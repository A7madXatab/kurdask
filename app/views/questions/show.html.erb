<div id="test" class="w-full relative flex flex-col justify-center items-center  mt-2 md:mt-10">
  <div id="banner" class="banner w-8/12 bg-red-400 absolute p-5 text-white top-0">
    <button class="focus:outline-none" onclick="document.getElementById('banner').classList.remove('flash')">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>

    <h1 id="banner-content" class="mx-4">

    </h1>
  </div>
  <div class="bg-white rounded-md shadow w-full lg:w-9/12 flex justify-center items-center flex-col md:flex-row p-5">
    <article class="w-full">
      <header class="text-2xl mb-1 md:mb-2 flex items-center">
        <h1 class="rotate-45"><%= @question.formatted_title %></h1>
      </header>

      <hr class="bg-gray-300 mb-1 md:mb-4"/>
      <main class="md:px-2 flex w-full">
        <aside
          data-controller=vote
          data-vote-entity="<%= @question.id %>"
          data-vote-type="<%= @question.class.to_s %>"
          class="flex flex-col items-center">

          <%#= @question.votes.find_by_voter_id(current_user.id).vote_status ? 'text-accent' : '' if current_user %>
          <%#= @question.votes.find_by_voter_id(current_user.id).vote_status ? '' : 'text-accent' if current_user %>
          <button data-action="vote#upvote"
                  class="focus:outline-none">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
            </svg>
          </button>

          <h1
            data-target="vote.count"
            class="text-xl">
            <%= @question.total_votes %>
          </h1>

          <button
            class="focus:outline-none "
            data-action="vote#downvote">
            <svg class="w-6 h-6 transform rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
            </svg>
          </button>
        </aside>
        <main class="mx-2 my-2 w-full">
          <%= markdown @question.description %>
        </main>
      </main>
      <hr class="bg-gray-300 mb-1 md:mb-4"/>
      <footer class="md:px-5">
        <header class="my-2">
          <h1 class="text-xl"><%= @question.count_answers.to_s.concat(t('questions.index.answers')) %></h1>
        </header>

        <section>
          <% @question.answers.each do |answer| %>
            <div class="flex flex-col justify-center items-end">
              <main class="w-full rounded border border-gray-200 my-2 p-3 flex items-center">
                <aside
                  data-vote-entity="<%= answer.id %>"
                  data-vote-type="<%= answer.class.to_s %>"
                  data-controller=vote
                  class="flex flex-col items-center">
                  <button data-action="vote#upvote" role="link" class="text-black hover:text-gray-600 focus:outline-none">
                    <svg aria-hidden="true" width="36" height="36" viewBox="0 0 36 36">
                      <path d="M2 26h32L18 10 2 26z"></path>
                    </svg>
                  </button>

                  <h1
                    data-target="vote.count"
                    class="text-xl">
                    <%= answer.total_votes %>
                  </h1>

                  <button data-action="vote#downvote">
                    <svg aria-hidden="true" class="text-black transform rotate-180" width="36" height="36" viewBox="0 0 36 36">
                      <path d="M2 26h32L18 10 2 26z"></path>
                    </svg>
                  </button>
                </aside>

                <main>
                  <%= markdown answer.body %>
                </main>
              </main>

              <small class="self-start mb-2">
                <%= t '.answered_by' %>
                <a href="<%= user_show_path answer.user.username %>" class="link-primary">
                  <%= answer.user.username %>
                  <%#= answer.created_at.to_formatted_s :short %>
                </a>
              </small>
            </div>
          <% end %>
        </section>

        <h2><%= t '.answer_question' %></h2>

        <main class="w-full">
          <% if current_user %>
            <%= form_with(model: @answer, url: answer_question_path) do |form| %>
              <%= hidden_field_tag :user_id, current_user.id, name: 'answer[user_id]' %>
              <%= hidden_field_tag :question_id, @question.id, name: "answer[question_id]" %>


              <%= render(MarkdownControlsComponent.new("answer_body", @answer.body)) do %>
                    <textarea data-target="markdown.input"
                              data-action="input->markdown#convertToMarkdown"
                              ref="input"
                              id="answer_body"
                              name="answer[body]"
                              class="resize-y <%= flash[:alert] ? "border-red-300" : "" %>"
                              rows="10"></textarea>
                <% if flash[:alert] %>
                  <small class="error"><%= t 'empty' %></small>
                <% end %>
              <% end %>

              <button type="submit" class="btn-primary-alt p-2 text-sm focus:outline-none focus:shadow-outline">
                <%= @question.owner?(current_user) ? t('.answer_your_question') : t('.answer_question') %>
              </button>
            <% end %>
          <% end %>
        </main>
      </footer>
    </article>
  </div>
</div>